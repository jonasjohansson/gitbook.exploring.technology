# 8. Reacting on audio level

One effective way of making visuals connect to audio is to make them react on the audio level. Calibrated well it can make the visual part of an installation feel alive.

Luckily, this is easy peasy in Tone.js with its [`Tone.Meter`](https://tonejs.github.io/docs/13.8.25/Meter)! Connect a player, oscillator or effect to it and it will tell you the audio's level in decibels. We can even connect `Tone.Master` to it to get the master volume level.

```javascript
const meter = new Tone.Meter()
Tone.Master.connect(meter)

// Later
const level = meter.getLevel()
```

{% hint style="info" %}
You can connect a node to several other destinations.
{% endhint %}

So now we now how to get the audio level in decibels, but the decibel range is not very handy when it comes to creating visuals. Translating the decibels to a gain value between `0` and `1` would be a lot more useful, and this you can do with this little helper function, copied from the [`decibels`](https://github.com/audiojs/decibels) repository:

```javascript
function decibelsToGain(value) {
  return Math.exp(value / 8.6858)
}
```

Because science.

It's now easy to use the gain value to for instance set the height of a rectangle:

```javascript
const level = meter.getLevel()
const gain = decibelsToGain(level)

fill(200)
rect(0, 0, 100, 100 * gain)
```

Here's a full example with a drum playing on mouse click, and a rectangle reflecting it's audio level:

```javascript
let player
let meter

function decibelsToGain(value) {
  return Math.exp(value / 8.6858)
}

function setup() {
  createCanvas(window.innerWidth, window.innerHeight)
  Tone.Master.volume.value = -24 // decibels

  player = new Tone.Player({
    url: 'https://www.alexanderwallin.com/audio/percussion-guiro_long.ogg',
  })
  player.connect(Tone.Master)
  
  meter = new Tone.Meter()
  Tone.Master.connect(meter)
}

function draw() {
  background(200)

  const level = meter.getLevel()
  const gain = decibelsToGain(level)
  fill(100)
  // We'll boost it by multiplying it by 100
  rect(0, 0, width, height * gain * 100)
}

function mouseClicked() {
  if (!player.loaded) {
    return
  }
  player.restart()
}

```

